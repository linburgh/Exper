+function(a,b){"use strict";var c=a.dxf={},d=function(a,b){for(var c in b)a[c]=b[c]},e=function(a,b){return parseInt(a,b?b:10)},f=function(a){return a==="true"},g=function(a){return parseFloat(a)},h=Math.PI,i=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,1,1],[0,0,1],[1,0,1],[1,1,1],[.5,.5,.5],[.75,.75,.75],[1,0,0],[1,.5,.5],[.65,0,0],[.65,.325,.325],[.5,0,0],[.5,.25,.25],[.3,0,0],[.3,.15,.15],[.15,0,0],[.15,.075,.075],[1,.25,0],[1,.625,.5],[.65,.1625,0],[.65,.4063,.325],[.5,.125,0],[.5,.3125,.25],[.3,.075,0],[.3,.1875,.15],[.15,.0375,0],[.15,.0938,.075],[1,.5,0],[1,.75,.5],[.65,.325,0],[.65,.4875,.325],[.5,.25,0],[.5,.375,.25],[.3,.15,0],[.3,.225,.15],[.15,.075,0],[.15,.1125,.075],[1,.75,0],[1,.875,.5],[.65,.4875,0],[.65,.5688,.325],[.5,.375,0],[.5,.4375,.25],[.3,.225,0],[.3,.2625,.15],[.15,.1125,0],[.15,.1313,.075],[1,1,0],[1,1,.5],[.65,.65,0],[.65,.65,.325],[.5,.5,0],[.5,.5,.25],[.3,.3,0],[.3,.3,.15],[.15,.15,0],[.15,.15,.075],[.75,1,0],[.875,1,.5],[.4875,.65,0],[.5688,.65,.325],[.375,.5,0],[.4375,.5,.25],[.225,.3,0],[.2625,.3,.15],[.1125,.15,0],[.1313,.15,.075],[.5,1,0],[.75,1,.5],[.325,.65,0],[.4875,.65,.325],[.25,.5,0],[.375,.5,.25],[.15,.3,0],[.225,.3,.15],[.075,.15,0],[.1125,.15,.075],[.25,1,0],[.625,1,.5],[.1625,.65,0],[.4063,.65,.325],[.125,.5,0],[.3125,.5,.25],[.075,.3,0],[.1875,.3,.15],[.0375,.15,0],[.0938,.15,.075],[0,1,0],[.5,1,.5],[0,.65,0],[.325,.65,.325],[0,.5,0],[.25,.5,.25],[0,.3,0],[.15,.3,.15],[0,.15,0],[.075,.15,.075],[0,1,.25],[.5,1,.625],[0,.65,.1625],[.325,.65,.4063],[0,.5,.125],[.25,.5,.3125],[0,.3,.075],[.15,.3,.1875],[0,.15,.0375],[.075,.15,.0938],[0,1,.5],[.5,1,.75],[0,.65,.325],[.325,.65,.4875],[0,.5,.25],[.25,.5,.375],[0,.3,.15],[.15,.3,.225],[0,.15,.075],[.075,.15,.1125],[0,1,.75],[.5,1,.875],[0,.65,.4875],[.325,.65,.5688],[0,.5,.375],[.25,.5,.4375],[0,.3,.225],[.15,.3,.2625],[0,.15,.1125],[.075,.15,.1313],[0,1,1],[.5,1,1],[0,.65,.65],[.325,.65,.65],[0,.5,.5],[.25,.5,.5],[0,.3,.3],[.15,.3,.3],[0,.15,.15],[.075,.15,.15],[0,.75,1],[.5,.875,1],[0,.4875,.65],[.325,.5688,.65],[0,.375,.5],[.25,.4375,.5],[0,.225,.3],[.15,.2625,.3],[0,.1125,.15],[.075,.1313,.15],[0,.5,1],[.5,.75,1],[0,.325,.65],[.325,.4875,.65],[0,.25,.5],[.25,.375,.5],[0,.15,.3],[.15,.225,.3],[0,.075,.15],[.075,.1125,.15],[0,.25,1],[.5,.625,1],[0,.1625,.65],[.325,.4063,.65],[0,.125,.5],[.25,.3125,.5],[0,.075,.3],[.15,.1875,.3],[0,.0375,.15],[.075,.0938,.15],[0,0,1],[.5,.5,1],[0,0,.65],[.325,.325,.65],[0,0,.5],[.25,.25,.5],[0,0,.3],[.15,.15,.3],[0,0,.15],[.075,.075,.15],[.25,0,1],[.625,.5,1],[.1625,0,.65],[.4063,.325,.65],[.125,0,.5],[.3125,.25,.5],[.075,0,.3],[.1875,.15,.3],[.0375,0,.15],[.0938,.075,.15],[.5,0,1],[.75,.5,1],[.325,0,.65],[.4875,.325,.65],[.25,0,.5],[.375,.25,.5],[.15,0,.3],[.225,.15,.3],[.075,0,.15],[.1125,.075,.15],[.75,0,1],[.875,.5,1],[.4875,0,.65],[.5688,.325,.65],[.375,0,.5],[.4375,.25,.5],[.225,0,.3],[.2625,.15,.3],[.1125,0,.15],[.1313,.075,.15],[1,0,1],[1,.5,1],[.65,0,.65],[.65,.325,.65],[.5,0,.5],[.5,.25,.5],[.3,0,.3],[.3,.15,.3],[.15,0,.15],[.15,.075,.15],[1,0,.75],[1,.5,.875],[.65,0,.4875],[.65,.325,.5688],[.5,0,.375],[.5,.25,.4375],[.3,0,.225],[.3,.15,.2625],[.15,0,.1125],[.15,.075,.1313],[1,0,.5],[1,.5,.75],[.65,0,.325],[.65,.325,.4875],[.5,0,.25],[.5,.25,.375],[.3,0,.15],[.3,.15,.225],[.15,0,.075],[.15,.075,.1125],[1,0,.25],[1,.5,.625],[.65,0,.1625],[.65,.325,.4063],[.5,0,.125],[.5,.25,.3125],[.3,0,.075],[.3,.15,.1875],[.15,0,.0375],[.15,.075,.0938],[.33,.33,.33],[.464,.464,.464],[.598,.598,.598],[.732,.732,.732],[.866,.866,.866],[1,1,1]];c.getColor=function(a){return i[a]},i.forEach(function(a,b){i[b]="rgb("+Math.floor(a[0]*255)+","+Math.floor(a[1]*255)+","+Math.floor(a[2]*255)+")"});var j=c.Attributes=function(a,b,c,d,e,f){this.layer=a||"",this.color=b||0,this.color24=c==null?-1:c,this.width=d||0,this.lineType=e||"BYLAYER",this.handle=f==null?-1:f},k=c.Dxf=function(){var a=this;a.vertices=null,a.maxVertices=0,a.vertexIndex=0,a.groupCode=0,a.groupValue="",a.currentObjectType="",a.values={},a.attrib=null;var b=a.sections={headers:{},tables:{layers:{}},blocks:{},entities:[]};a.handler={$:a.addSetting,LAYER:a.addLayer,BLOCK:a.addBlock,ENDBLK:a.endBlock,LINE:a.addLine,POLYLINE:a.addPolyline,LWPOLYLINE:a.addPolyline,VERTEX:a.addVertex,ARC:a.addArc,ELLIPSE:a.addEllipse,CIRCLE:a.addCircle,INSERT:a.addInsert,TEXT:a.addText,MTEXT:a.addMText,ATTRIB:a.addAttrib,SEQEND:a.endSequence}};d(k.prototype,{hasValue:function(a){return this.values.hasOwnProperty(a)},getIntValue:function(a,b,c){return this.hasValue(a)?e(this.values[a],c):b},getStringValue:function(a,b){return this.hasValue(a)?this.values[a]:b},getRealValue:function(a,b){return this.hasValue(a)?g(this.values[a]):b},parse:function(a){var b=this;b.lines=a.split("\n"),b.lineCount=b.lines.length,b.index=0,b.currentObjectType="";while(b.readDxfGroups());},readDxfGroups:function(){var a=this,b=a.index,c=a.lineCount,d=a.lines,f,g;return b>c-2?!1:(f=d[b].trim(),g=d[b+1].trim(),a.index+=2,f?(this.groupCode=e(f),this.groupValue=g,this.processDXFGroup(),a.index<a.lineCount-1):!1)},processDXFGroup:function(){var a=this,b=a.groupCode,c=a.groupValue;if(b===0||b===9){var d=a.getStringValue(8,"0"),e;a.hasValue(39)&&!a.hasValue(370)?e=a.getIntValue(39,-1):a.hasValue(370)?e=a.getIntValue(370,-1):e=-1;var f=a.getIntValue(62,256),g=a.getIntValue(420,-1),h=a.getIntValue(5,-1,16),i=a.getStringValue(6,"BYLAYER");a.attrib=new j(d,f,g,e,i,h);var k=a.handler[a.currentObjectType];k&&k.call(a),a.values={},c[0]==="$"?(a.currentObjectType="$",a.settingKey=c):a.currentObjectType=c}else{var l=!1;a.currentObjectType==="MTEXT"?l=a.handleMTextData():a.currentObjectType==="LWPOLYLINE"&&(l=a.handleLWPolylineData()),l||(a.values[b]=c)}},addSetting:function(){var a=this,b=a.settingKey,c=a.sections.headers,d=a.values,f=e(Object.keys(d)[0]);f>=0&&f<=9?c[b]=d[f]:f>=10&&f<=39?f===10&&(c[b]={x:a.getRealValue(f,0),y:a.getRealValue(f+10,0),z:a.getRealValue(f+20,0)}):f>=40&&f<=59?c[b]=a.getRealValue(f,0):f>=60&&f<=99?c[b]=a.getIntValue(f,0):f>=0&&(c[b]=d[f])},addLayer:function(){var a=this,b=a.attrib;if(b.color===256||b.color===0)b.color=7;b.width<0&&(b.width=1);var c=b.lineType;c=c.toUpperCase();if(c==="BYLAYER"||c==="BYBLOCK")b.lineType="CONTINUOUS";var d=a.getStringValue(2,"");if(!d)return;var e=new l(d,a.getIntValue(70,0));e.attrib=b,a.sections.tables.layers[d]=e},addBlock:function(){var a=this,b=a.getStringValue(2,"");if(!b)return;a.block=new m(b,a.getIntValue(70,0),a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0))},endBlock:function(){var a=this;a.sections.blocks[a.block.name]=a.block,a.block=null},addLine:function(){var a=this;a.addEntity(new n(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(11,0),a.getRealValue(21,0),a.getRealValue(31,0)))},addEntity:function(a){var b=this;a.attrib=b.attrib,(b.block||b.sections).entities.push(a)},addPolyline:function(){var a=this,b=a.vertices,c;if(a.polyline)throw"polyline";a.polyline=new q(a.maxVertices,a.getIntValue(71,0),a.getIntValue(72,0),a.getIntValue(70,0)),a.maxVertices=Math.min(a.maxVertices,a.vertexIndex+1);if(a.currentObjectType==="LWPOLYLINE"){for(c=0;c<b.length/4;c++)a.polyline.points.push(new r(b[c*4],b[c*4+1],b[c*4+2],b[c*4+3]));a.vertices=null,a.addEntity(a.polyline),a.polyline=null}},addVertex:function(){var a=this;if(a.getIntValue(70,0)&128&&!(a.getIntValue(70,0)&64))return;a.polyline.points.push(new r(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(42,0)))},addArc:function(){var a=this;a.addEntity(new o(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(40,0),a.getRealValue(50,0),a.getRealValue(51,0)))},addCircle:function(){var a=this;a.addEntity(new p(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(40,0)))},addEllipse:function(){var a=this;a.addEntity(new s(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(11,0),a.getRealValue(21,0),a.getRealValue(31,0),a.getRealValue(40,1),a.getRealValue(41,0),a.getRealValue(42,2*h)))},addInsert:function(){var a=this,b=a.getStringValue(2,"");if(!b)return;a.addEntity(new t(b,a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(41,1),a.getRealValue(42,1),a.getRealValue(43,1),a.getRealValue(50,0),a.getIntValue(70,1),a.getIntValue(71,1),a.getRealValue(44,0),a.getRealValue(45,0)))},addMText:function(){var a=this,b=0,c,d;a.hasValue(50)?b=a.getRealValue(50,0)*2*h/360:a.hasValue(11)&&a.hasValue(21)&&(c=a.getRealValue(11,0),d=a.getRealValue(21,0),Math.abs(c)<1e-6?d>0?b=h/2:b=h/2*3:b=Math.atan(d/c)),a.addEntity(new u(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(11,0),a.getRealValue(21,0),a.getRealValue(31,0),a.getRealValue(40,2.5),a.getRealValue(41,0),a.getIntValue(71,1),a.getIntValue(72,1),a.getIntValue(73,1),a.getRealValue(44,1),a.getStringValue(1,""),a.getStringValue(7,""),b))},handleMTextData:function(){var a=this,b,c;return a.groupCode===3?(b=(a.block||a.sections).entities,c=b[b.length],c instanceof u&&(c.text=c.text?c.text+a.groupValue:a.groupValue),!0):!1},handleLWPolylineData:function(){var a=this,b=a.groupCode,c=a.groupValue,d=a.maxVertices,f=a.vertexIndex,h=a.vertices,i;if(b===90){d=a.maxVertices=e(c);if(d>0){h=a.vertices=[];for(i=0;i<d;++i)h[i*4]=0,h[i*4+1]=0,h[i*4+2]=0,h[i*4+3]=0}return a.vertexIndex=-1,!0}return b===10||b===20||b===30||b===42?(b===10&&(f=++a.vertexIndex),b<=30?f>=0&&(h[4*f+(Math.floor(b/10)-1)]=g(c)):b===42&&(h[4*f+3]=g(c)),!0):!1},addText:function(){var a=this;a.addEntity(new v(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(11,0),a.getRealValue(21,0),a.getRealValue(31,0),a.getRealValue(40,2.5),a.getRealValue(41,1),a.getIntValue(71,0),a.getIntValue(72,0),a.getIntValue(73,0),a.getStringValue(1,""),a.getStringValue(7,""),a.getRealValue(50,0)*2*h/360))},addAttrib:function(){var a=this;a.addEntity(new v(a.getRealValue(10,0),a.getRealValue(20,0),a.getRealValue(30,0),a.getRealValue(11,0),a.getRealValue(21,0),a.getRealValue(31,0),a.getRealValue(40,2.5),a.getRealValue(41,1),a.getIntValue(71,0),a.getIntValue(72,0),a.getIntValue(74,0),a.getStringValue(1,""),a.getStringValue(7,""),a.getRealValue(50,0)*2*h/360))},endSequence:function(){var a=this;a.polyline&&(a.addEntity(a.polyline),a.polyline=null)}});var l=c.LayerData=function(a,b){this.name=a,this.flags=b},m=c.BlockData=function(a,b,c,d,e){this.name=a,this.flags=b,this.bpx=c,this.bpy=d,this.bpz=e,this.entities=[]},n=c.LineData=function(a,b,c,d,e,f){var g=this;g.x1=a,g.y1=b,g.z1=c,g.x2=d,g.y2=e,g.z2=f},o=c.ArcData=function(a,b,c,d,e,f){var g=this;g.cx=a,g.cy=b,g.cz=c,g.radius=d,g.angle1=e,g.angle2=f},p=c.CircleData=function(a,b,c,d){var e=this;e.cx=a,e.cy=b,e.cz=c,e.radius=d},q=c.PolylineData=function(a,b,c,d){var e=this;e.number=a,e.m=b,e.n=c,e.flags=d,e.points=[]},r=c.VertexData=function(a,b,c,d){var e=this;e.x=a,e.y=b,e.z=c,e.bulge=d},s=c.EllipseData=function(a,b,c,d,e,f,g,h,i){var j=this;j.cx=a,j.cy=b,j.cz=c,j.mx=d,j.my=e,j.mz=f,j.ratio=g,j.angle1=h,j.angle2=i},t=c.InsertData=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;m.name=a,m.ipx=b||0,m.ipy=c||0,m.ipz=d||0,m.sx=e||1,m.sy=f||1,m.sz=g||1,m.angle=h||0,m.cols=i||0,m.rows=j||0,m.colSp=k||0,m.rowSp=l||0},u=c.MTextData=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;p.ipx=a,p.ipy=b,p.ipz=c,p.dirx=d,p.diry=e,p.dirz=d,p.height=g,p.width=h,p.attachmentPoint=i,p.drawingDirection=j,p.lineSpacingStyle=k,p.lineSpacingFactor=l,p.text=m,p.style=n,p.angle=o},v=c.TextData=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;o.ipx=a,o.ipy=b,o.ipz=c,o.apx=d,o.apy=e,o.apz=f,o.height=g,o.xScaleFactor=h,o.textGenerationFlags=i,o.hJustification=j,o.vJustification=k,o.text=l,o.style=m,o.angle=n}}(this);